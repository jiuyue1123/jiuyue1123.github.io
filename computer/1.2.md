#  <center>1.2 计算机硬件系统</center>

### <p align="right">时间：2023-1-31</p>

### <p align="right">Abraham nanak</p>

---



## 需要掌握以下内容

* 【掌握】CPU的两个部件
* 【掌握】CPU的主要性能指标
* 【掌握】存储器的不同分类
* 【了解】存储器的性能指标
* 【掌握】外部设备的分类
* 【掌握】硬盘的分类及信息分布
* 【掌握】多种I/O方式
* 【掌握】总线的基本知识
* 【掌握】计算机指令的执行
* 【掌握】计算机的指令系统

计算机硬件系统主要包括中央处理器、存储器（包括主存储器、高速缓冲存储器及辅助存储器）及其他外部设备、它们之间通过总线连接起来。

## 中央处理器

中央处理器（CPU）使计算机的运算和控制核心，是计算机的“大脑”，其功能主要是解释计算机指令和控制软件中的数据。CPU主要包括运算器和控制器两个部件，他们都包含寄存器并通过总线连接起来。

1. 运算器负责对数据进行加工处理（对数据进行算术运算和逻辑运算）。
2. 控制器负责对程序所规定的指令进行分析，控制并协调输入、输出操作或对主存储器的访问。
3. 寄存器是高速存储区域，用来暂时存放参与运算的数据和运算结果。寄存器的种类比较多，包括指令寄存器、地址寄存器、存储寄存器及累加寄存器。根据CPU中寄存器的数量和每个寄存器的大小（多少位）可以确定CPU的性能和速度。例如一个64位的CPU是指CPU中的寄存器是64位的。所以每个CPU指令可以处理64位的数据。
4. CPU的主要技术指标有字长、主频、运算速度等。
   * 字长是指CPU一次能处理的二进制数据的位数。在工作频率不变和CPU体系结构相似的前提下，字长越长，CPU的数据处理速度越快。
   * 主频是指CPU的时钟频率，计算机的操作在时钟信号的控制下分步执行，每个时钟信号周期完成一步操作。主频越高，CPU的运算速度就越高。
   * 运算速度通常是指CPU每秒所能执行的加法指令数目，常用百万次/秒（MIPS）来表示。这个指标能直观的反映计算机的运行速度。

## 存储器

存储器是存储程序和数据的部件，它可以自动完成程序或数据的存取。

1. 存储器的分类

   * 按存储介质分类：半导体存储器、磁表面存储器、磁芯存储器、光盘按存储器。
   * 按存取方式分类：随机存储器、只读存储器、串行访问存储器、直接存取存储器。
   * 按在计算机中的作用分类：主存储器、高速缓冲存储器、辅助存储器。

2. 主存储器

   存储器中最重要的是主存储器，它一般采用半导体存储器，包括RAM和ROM两种。

   1. RAM

      RAM具有可读写性，即信息可读、可写，当写入时，原本存储的数据被擦除；具有易失性，即断电后数据会消失，且无法恢复。RAM又分类静态RAM和动态RAM。

      * 静态RAM（SRAM）特点是集成度低、价格高。存储速度快，不需要刷新。
      * 动态RAM（DRAM）特点是集成度高、价格低、存储速度慢、需要刷新。

      DRAM目前被各类计算机广泛使用，内存条采用的就是DRAM。

   2. ROM

      ROM中信息只能读出不能写入，ROM具有内容永久性，断电后信息不会消失。根据半导体制作工艺的不同可分为可编程只读存储器（PROM）、可擦可编程只读存储器（EPROM）、电擦除可编程只读存储器（EEPROM）、掩模型只读存储器（MROM）等。

   3. 高速缓冲存储器

      高速缓冲存储器是介于CPU和内存之间的一种小容量、可高速存取信息的芯片，用于解决它们之间速度不匹配的问题。高速缓冲存储器一般用速度高的SRAM元件组成其速度与CPU相当，但价格较高。

   4. 辅助存储器

      辅助存储器的容量一般都比较大，而且大部分可以移动，便于不同计算机之间进行信息交流。辅助存储器中数据被读入内存后，才能被CPU读取，CPU不能直接访问辅助存储器。

   存储器主要有三个性能指标：速度、容量和每位（bit）价格。一般来说速度越快、位价格越高；容量越大，为价格越低，同时速度也越慢。

## 外部设备

1. 外部设备的分类

   计算机中的CPU和主存储器构成主机，除了主机以外，围绕着主机设置的各种硬件装置称为外部设备（外设）。外设的种类有很多，应用比较广泛的有输入/输出(I/O)设备、辅助存储器及终端设备。

   1. 输入/输出设备

      * 输入设备。输入设备是指向计算机输入数据和信息的设备，用于向计算机输入原始数据和处理数据的程序。常用的输入设备有键盘、鼠标、摄像头、扫描仪、语音输入设备、触感器等。
      * 输出设备。输出设备的功能是将各种计算结果数据或信息以数字、字符、图像、声音等形式表示出来。常见的输出设备有显示器、打印机、绘图仪、音响等。
      * 有一些设备同时集成了输入和输出两种功能，如光盘刻录机。

   2. 辅助存储器

      辅助存储器可以存放大量的程序而不会丢失。目前常见的辅助存储器有硬盘、闪存（U盘、SM卡、SD卡、记忆棒、TF卡等）及光盘等。

   3. 终端设备

      终端设备是指经由通信设施向计算机输入程序或接收计算机的输出处理结果的设备。终端设备可分为通用终端设备和专用终端设备。

2. 硬盘

   硬盘是计算机主要的外部存储设备，具有容量大、存取速度快等优点。

   1. 硬盘的分类

      根据磁头是否可以移动、硬盘可以分为固定磁头硬盘和活动磁头硬盘两类。磁头和磁臂是硬盘的重要组成部分，磁头安装在磁臂上，负责读/写各磁道上的数据。

      * 固定磁头硬盘中，每个磁道对应一个磁头。工作时，磁头无径向移动，其特点是存取速度快，省去了磁头寻找磁道的时间，但价格比较高。
      * 活动磁头硬盘中，每个盘面只有一个磁头，在存取数据时，磁头在盘面上做径向移动。由于增加了“寻道”时间，其存取时间比固定磁头硬盘要慢。目前常用的硬盘都是活动磁头的。

   2. 硬盘的信息分布

      * 记录面

        磁盘通常由重叠的一组盘片构成，每个盘片的两面都可用作记录面，每个记录面对应一个磁头，所以记录面号就是磁头号。

      * 磁道

        当盘片旋转时，磁头若保持在一个位置上，则每个磁头都会在记录面上划出一个圆形轨迹，这些圆形轨迹就是磁道。一条条磁道形成一组同心圆，最外圈的磁道为0号，往内递增。

      * 圆柱面

        在一个硬盘中，各记录面上相同编号的磁道构成一个圆柱面。圆柱面号就是对应磁道号。

      * 扇区

        通常将一个磁道划分为若干弧段，每个弧段被称为一个扇区或扇段，扇区从1开始编号。

      因此，硬盘寻址用的磁盘地址应该由磁盘号（一台计算机可能有多个磁盘）、记录面（磁头）号、圆柱面（磁道）号、扇区号等字段组成。

   3. I/O接口

      I/O接口（I/O控制器）用于主机和外部设备之间的通信，通过接口可实现主机和外设之间的信息交换。

      1. I/O接口的功能

         * 实现主机和外设的通信联络控制。
         * 进行地址译码和设备选择
         * 实现数据缓冲以匹配速度
         * 信号格式的转换
         * 传输控制命令和状态信息

      2. I/O方式

         * 程序查询方式

           一旦某一外设被选中并启动，主机将查询这个外设的某些状态位，看其是否准备就绪：若为准备就绪，则主机将再次查询；若外设已准备就绪，则执行一次I/O操作。这种方式控制简单，但系统效率低。

         * 程序中断方式

           在主机启动外设后，无需等待查询，继续执行原来的程序。外设准备就绪之后向主机发送中断信号，主机接到信号之后暂时中止原来执行的程序，转而执行I/O操作，待执行完毕继续执行程序。

         * DMA方式

           在内存和外设之间开辟直接的数据通道，可以进行基本上不需要CPU介入的内存和外设之间的信息传输，这样不仅保证了CPU的高效率，也能满足高速外设的需要。

         * I/O通道控制方式

           是DMA方式的进一步发展，在系统中设有通道控制部件，每个通道有若干外设。主机执行I/O指令启动有关通道，通道执行通道程序，完成I/O操作。通道是一种独立于CPU的专门管理I/O的处理机制、它控制设备与内存直接进行数据交换，通道指令由CPU启动，并在操作结束时向CPU发出中断信号。

## 总线

总显示一组能被多个部件分时共享的公共信息传输线路。分时是指同一时刻总线上只能传输一个部件发送的信息；共享指的是总线上可以挂在多个部件，各个部件之间互相互换的信息都可以通过这组公共线路传输。

1. 总线的分类

   总线按功能层次分类可分为3类

   * 片内总线

     指芯片内部的总线，如在CPU芯片内部寄存器与寄存器之间、寄存器与算术逻辑单元之间都由片内总线连接。

   * 系统总线

     指计算机硬件系统内各功能部件（CPU、内存、I/O接口）之间相互连接的总线，也称内部总线。系统总线按传输的信息不同，又分为数据总线（双向传输）、地址总线（单向传输）及控制总线（部分“出”、部分“入”）。

   * 通信总线

     用于计算机之间或计算机与其他设备（远程通信设备、测试设备）之间信息传输的总线，也称外部总线。依据总线的不同传输方式又分为串行通信总线和并行通信总线。

2. 总线的基本结构

   从系统的角度出发，总线的基本结构如下。

   * 单总线结构

     只有一条系统总线，CPU、内存、I/O设备都挂在该总线上、允许I/O设备之间、I/O设备与CPU之间或I/O设备与内存之间直接交换信息。

   * 双总线结构

     将低速I/O设备从单总线上分离出来，实现I/O与内存总线的分离。

   * 三纵线结构

     各部件之间采用三条各自独立的总先来构成信息通道。内存总线用CPU和内存之间传输地址、数据及控制信息；I/O总线用于CPU和外设之间通信；直接内存访问总线用于内存和高速外设之间直接传输数据。

3. 总线的性能指标

   * 总线周期：一次总线操作（包括申请阶段、寻址阶段、传输阶段及结束阶段）所需的时间简称总线周期。总线周期通常由若干总线时钟周期构成。
   * 总线时钟周期：计算机的时钟周期
   * 总线的工作频率：总线在各种操作的频率，为总线周期的倒数。若总线周期=N×时钟周期，则总线的工作频率=时钟频率/N。
   * 总线宽度：通常指数据总线的根数，用位表示，如32位数据总线。
   * 总线带宽：可理解为总线的数据传输率，即单位时间内总线上传输数据的位数，通常用每秒传输信息的字节数来衡量，单位可用MB/s表示。
   * 时钟同步/异步：数据与时钟同步工作的总线称为同步总线，数据与时钟不同步工作的总线称为异步总线。
   * 总线复用：一种总线在不同的时间传输不同的信息。
   * 信号线数：地址总线、数据总线及控制总线三种总线数的总和。

4. 总线仲裁

   为了保证同一时刻只有一个申请者使用总线，总线控制机构中有总线判优和总线仲裁控制逻辑，按照一定的优先顺序来决定哪个部件使用总线。主要有集中式控制和分布式控制。

   * 集中式控制

     总线控制逻辑基本上集中于一个设备（CPU）中。将所有的总线请求集中起来，利用一个特定的裁决算法进行裁决。

   * 分布式控制

     不需要中央仲裁器，即总线控制逻辑分散在连接于总线上的各个部件或设备上。

5. 总线操作

   总线操作主要有读和写、块传输、写后读或读后写、广播和广集。

6. 总线标准

   总线标准是国际上公布或推荐的各个模块的标准，是把各种不同的模块组成计算机系统时必须遵守的规范。

## 计算机工作原理

计算机在执行程序时必须将要执行的程序载入内存中，在执行时，CPU根据当前程序指针寄存器（PC）的内容取出指令并执行，然后再取出下一条指令并执行，如此循环直到程序结束。其工作过程就是不断的取指令和执行指令，最后将计算结果放入指令指定的存储器地址中。

1. 计算机指令的格式

   指令是指计算机完成某个基本操作的命令。指令能被计算机硬件理解并执行。一条计算机指令使用一串二进制代码表示的，它通常包括两方面的信息：操作码和操作数（地址码），如下图所示。

   ![image-20230201024655297](.\assets\Computerinstructions.png)

   操作数指明指令所要完成操作的性质和功能，即指出进行什么操作。操作码也是二进制代码。对于一种类型的计算机来说，各操作指令的操作码不同，分别表示不同的操作。因此，指令中操作码的个数取决于二进制位数。

   操作数指明操作码执行的操作对象。操作数可以是数据本身，也可以是存放数据的内存单元地址或寄存器名称。根据指令中操作数的性质，操作数可分为两类：源操作数和目的操作数。例如，减法指令的减数和被减数为源操作数，它们的差为目的操作数。

   如果指令中的操作码和操作数共占n个字节，则称该指令为n字节指令。

2. 计算机指令的寻址方式

   寻址方式是指找到当前正在执行指令的数据地址和下一条将要执行指令的地址的方法。

   寻址方式被分为两大类：找到下一条将要执行指令的地址，称为指令寻址。找到当前正在执行指令的数据地址，称为数据寻址。

   指令寻址分为顺序寻址和跳跃寻址两种。常见的数据寻址有立即寻址、直接寻址、隐含寻址、间接寻址、寄存器寻址、寄存器间接寻址、基址寻址、变址寻址、相对寻址及堆栈寻址。

3. 计算机指令系统

   一台计算机所能执行的指令集合称为该计算机的指令系统。不同类型的计算机指令系统的指令数目与格式也不同。但无论哪种类型的计算机，指令系统都应该具有以下功能指令。

   * 数据传输类指令：用来实现数据在内存和CPU之间的传输。
   * 运算类指令：用来进行数据的运算。
   * 程序控制类指令：用来控制程序中指令的运算顺序。
   * 输入/输出指令：用来实现外设与主机之间的数据传输。
   * 处理器控制和调试指令：用来实现计算机的硬件管理。

4. 指令的执行过程

   指令的执行过程可分为取指令、分析指令和执行指令三个步骤。

   * 取指令：按照程序规定的次序，从内存取出当前执行的指令，并送到控制器的指令寄存器中。
   * 分析指令：对所取指令进行分析，即根据指令中的操作吗确定计算机应进行什么操作。由指令中的地址码确定操作码存放的地址。
   * 执行指令：根据指令分析结果，由控制器发出完成操作的一系列控制电位，以便指挥计算机有关部件完成这一操作，同时，为下一条指令做好准备。

一般吧计算机完成一条指令所花费的时间称为一个指令周期。指令周期越短，指令执行就越快。
